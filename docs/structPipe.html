<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Daft Engineers Vocoder: Pipe&lt; T &gt; Struct Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Daft Engineers Vocoder
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Now you too can be daft</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structPipe-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Pipe&lt; T &gt; Struct Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="pipe_8hh_source.html">pipe.hh</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for Pipe&lt; T &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="structPipe__coll__graph.png" border="0" usemap="#aPipe_3_01T_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="aPipe_3_01T_01_4_coll__map" id="aPipe_3_01T_01_4_coll__map">
<area shape="rect" title=" " alt="" coords="5,5,93,112"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a43a2c8d55615adc571b8a9e7bfd86b97"><td class="memItemLeft" align="right" valign="top">std::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPipe.html#a43a2c8d55615adc571b8a9e7bfd86b97">cond</a></td></tr>
<tr class="separator:a43a2c8d55615adc571b8a9e7bfd86b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefa2dd596aa44671efc10b9a29c59de3"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPipe.html#aefa2dd596aa44671efc10b9a29c59de3">cond_m</a></td></tr>
<tr class="separator:aefa2dd596aa44671efc10b9a29c59de3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7609b528927ede7a24bbab176d32f8fd"><td class="memItemLeft" align="right" valign="top">std::queue&lt; T &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPipe.html#a7609b528927ede7a24bbab176d32f8fd">queue</a> {}</td></tr>
<tr class="separator:a7609b528927ede7a24bbab176d32f8fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br />
struct Pipe&lt; T &gt;</h3>

<p><a class="el" href="structPipe.html">Pipe</a> struct to allow data to flow between modules in a thread safe way.</p>
<p>Data is placed into a pipe by placing it on the back of the pipe's queue. It can then be retrieved from the front of the pipe's queue. The mutex must be locked when interacting with the queue to prevent memory safety issues. With the use of the <code>wait()</code> and <code>notify_all()</code> functions, a thread can sleep while the queue is empty.</p>
<p>The pipe can be used as followed, for example </p><div class="fragment"><div class="line"><span class="comment">// declarations</span></div>
<div class="line"><a class="code" href="structPipe.html">Pipe&lt;type&gt;</a> input;</div>
<div class="line"><a class="code" href="structPipe.html">Pipe&lt;type&gt;</a> output;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">std::unique_lock&lt;std::mutex&gt; input_lk(input.<a class="code" href="structPipe.html#aefa2dd596aa44671efc10b9a29c59de3">cond_m</a>);</div>
<div class="line">input_lk.unlock();</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">while</span>(loop) {</div>
<div class="line">  input_lk.lock();</div>
<div class="line">  wait(input_lk, [<span class="keyword">this</span>] {<span class="keywordflow">return</span> input.<a class="code" href="structPipe.html#a7609b528927ede7a24bbab176d32f8fd">queue</a>.empty() == <span class="keyword">false</span>;})</div>
<div class="line">  type data = input.<a class="code" href="structPipe.html#a7609b528927ede7a24bbab176d32f8fd">queue</a>.front();</div>
<div class="line">  input.<a class="code" href="structPipe.html#a7609b528927ede7a24bbab176d32f8fd">queue</a>.pop();</div>
<div class="line">  input_lkk.unlock();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// do logic here</span></div>
<div class="line"> </div>
<div class="line">  {</div>
<div class="line">    std::lock_guard&lt;std::mutex&gt; out_lk(output.<a class="code" href="structPipe.html#aefa2dd596aa44671efc10b9a29c59de3">cond_m</a>);</div>
<div class="line">    output.<a class="code" href="structPipe.html#a7609b528927ede7a24bbab176d32f8fd">queue</a>.push(audio_out);</div>
<div class="line">  }</div>
<div class="line">  output.<a class="code" href="structPipe.html#a43a2c8d55615adc571b8a9e7bfd86b97">cond</a>.notify_all();</div>
<div class="line">}</div>
<div class="ttc" id="astructPipe_html"><div class="ttname"><a href="structPipe.html">Pipe</a></div><div class="ttdef"><b>Definition:</b> pipe.hh:44</div></div>
<div class="ttc" id="astructPipe_html_a43a2c8d55615adc571b8a9e7bfd86b97"><div class="ttname"><a href="structPipe.html#a43a2c8d55615adc571b8a9e7bfd86b97">Pipe::cond</a></div><div class="ttdeci">std::condition_variable cond</div><div class="ttdef"><b>Definition:</b> pipe.hh:45</div></div>
<div class="ttc" id="astructPipe_html_a7609b528927ede7a24bbab176d32f8fd"><div class="ttname"><a href="structPipe.html#a7609b528927ede7a24bbab176d32f8fd">Pipe::queue</a></div><div class="ttdeci">std::queue&lt; T &gt; queue</div><div class="ttdef"><b>Definition:</b> pipe.hh:47</div></div>
<div class="ttc" id="astructPipe_html_aefa2dd596aa44671efc10b9a29c59de3"><div class="ttname"><a href="structPipe.html#aefa2dd596aa44671efc10b9a29c59de3">Pipe::cond_m</a></div><div class="ttdeci">std::mutex cond_m</div><div class="ttdef"><b>Definition:</b> pipe.hh:46</div></div>
</div><!-- fragment --> </div><h2 class="groupheader">Member Data Documentation</h2>
<a id="a43a2c8d55615adc571b8a9e7bfd86b97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43a2c8d55615adc571b8a9e7bfd86b97">&#9670;&nbsp;</a></span>cond</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::condition_variable <a class="el" href="structPipe.html">Pipe</a>&lt; T &gt;::cond</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Condition variable for the pipe, used to wait/notify. </p>

</div>
</div>
<a id="aefa2dd596aa44671efc10b9a29c59de3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefa2dd596aa44671efc10b9a29c59de3">&#9670;&nbsp;</a></span>cond_m</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::mutex <a class="el" href="structPipe.html">Pipe</a>&lt; T &gt;::cond_m</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mutex for the condition variable. </p>

</div>
</div>
<a id="a7609b528927ede7a24bbab176d32f8fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7609b528927ede7a24bbab176d32f8fd">&#9670;&nbsp;</a></span>queue</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::queue&lt;T&gt; <a class="el" href="structPipe.html">Pipe</a>&lt; T &gt;::queue {}</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Queue to hold the data. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>include/<a class="el" href="pipe_8hh_source.html">pipe.hh</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
